!function(a){"use strict";function b(a,b){return"f"===a?Math.round(5/9*(b-32)):Math.round(1.8*b+32)}a.extend({simpleWeather:function(c){c=a.extend({location:"",woeid:"",unit:"f",success:function(a){},error:function(a){}},c);var d=new Date,e="https://query.yahooapis.com/v1/public/yql?format=json&rnd="+d.getFullYear()+d.getMonth()+d.getDay()+d.getHours()+"&diagnostics=true&callback=?&q=";if(""!==c.location){var f="";f=/^(\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)$/.test(c.location)?"("+c.location+")":c.location,e+='select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="'+f+'") and u="'+c.unit+'"'}else{if(""===c.woeid)return c.error("Could not retrieve weather due to an invalid location."),!1;e+="select * from weather.forecast where woeid="+c.woeid+' and u="'+c.unit+'"'}return a.getJSON(encodeURI(e),function(a){if(null!==a&&null!==a.query&&null!==a.query.results&&"Yahoo! Weather Error"!==a.query.results.channel.description){var d,e=a.query.results.channel,f={},g=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"],h="https://s.yimg.com/os/mit/media/m/weather/images/icons/l/44d-100567.png";f.title=e.item.title,f.temp=e.item.condition.temp,f.code=e.item.condition.code,f.todayCode=e.item.forecast[0].code,f.currently=e.item.condition.text,f.high=e.item.forecast[0].high,f.low=e.item.forecast[0].low,f.text=e.item.forecast[0].text,f.humidity=e.atmosphere.humidity,f.pressure=e.atmosphere.pressure,f.rising=e.atmosphere.rising,f.visibility=e.atmosphere.visibility,f.sunrise=e.astronomy.sunrise,f.sunset=e.astronomy.sunset,f.description=e.item.description,f.city=e.location.city,f.country=e.location.country,f.region=e.location.region,f.updated=e.item.pubDate,f.link=e.item.link,f.units={temp:e.units.temperature,distance:e.units.distance,pressure:e.units.pressure,speed:e.units.speed},f.wind={chill:e.wind.chill,direction:g[Math.round(e.wind.direction/22.5)],speed:e.wind.speed},e.item.condition.temp<80&&e.atmosphere.humidity<40?f.heatindex=-42.379+2.04901523*e.item.condition.temp+10.14333127*e.atmosphere.humidity-.22475541*e.item.condition.temp*e.atmosphere.humidity-6.83783*Math.pow(10,-3)*Math.pow(e.item.condition.temp,2)-5.481717*Math.pow(10,-2)*Math.pow(e.atmosphere.humidity,2)+1.22874*Math.pow(10,-3)*Math.pow(e.item.condition.temp,2)*e.atmosphere.humidity+8.5282*Math.pow(10,-4)*e.item.condition.temp*Math.pow(e.atmosphere.humidity,2)-1.99*Math.pow(10,-6)*Math.pow(e.item.condition.temp,2)*Math.pow(e.atmosphere.humidity,2):f.heatindex=e.item.condition.temp,"3200"==e.item.condition.code?(f.thumbnail=h,f.image=h):(f.thumbnail="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+e.item.condition.code+"ds.png",f.image="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+e.item.condition.code+"d.png"),f.alt={temp:b(c.unit,e.item.condition.temp),high:b(c.unit,e.item.forecast[0].high),low:b(c.unit,e.item.forecast[0].low)},"f"===c.unit?f.alt.unit="c":f.alt.unit="f",f.forecast=[];for(var i=0;i<e.item.forecast.length;i++)d=e.item.forecast[i],d.alt={high:b(c.unit,e.item.forecast[i].high),low:b(c.unit,e.item.forecast[i].low)},"3200"==e.item.forecast[i].code?(d.thumbnail=h,d.image=h):(d.thumbnail="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+e.item.forecast[i].code+"ds.png",d.image="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+e.item.forecast[i].code+"d.png"),f.forecast.push(d);c.success(f)}else c.error("There was a problem retrieving the latest weather information.")}),this}})}(jQuery);